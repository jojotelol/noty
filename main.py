import base64
exec(base64.b64decode("IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KZnJvbSBvcyBpbXBvcnQgc3lzdGVtLCBuYW1lCmltcG9ydCBvcywgdGhyZWFkaW5nLCByZXF1ZXN0cywgc3lzLCBjbG91ZHNjcmFwZXIsIGRhdGV0aW1lLCB0aW1lLCBzb2NrZXQsIHNvY2tzLCBzc2wsIHJhbmRvbSwgaHR0cHgKZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHVybHBhcnNlCmZyb20gcmVxdWVzdHMuY29va2llcyBpbXBvcnQgUmVxdWVzdHNDb29raWVKYXIKaW1wb3J0IHVuZGV0ZWN0ZWRfY2hyb21lZHJpdmVyIGFzIHdlYmRyaXZlcgpmcm9tIHN5cyBpbXBvcnQgc3Rkb3V0CmZyb20gY29sb3JhbWEgaW1wb3J0IEZvcmUsIGluaXQKCmRlZiBjb3VudGRvd24odCk6CiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQogICAgd2hpbGUgVHJ1ZToKICAgICAgICBpZiAodW50aWwgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoKICAgICAgICAgICAgc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgc3Rkb3V0LndyaXRlKCJcciAiK0ZvcmUuTUFHRU5UQSsiWypdIitGb3JlLldISVRFKyIgQXR0YWNrIHN0YXR1cyA9PiAiICsgc3RyKCh1bnRpbCAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkpICsgIiBzZWMgbGVmdCAiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgIHN0ZG91dC53cml0ZSgiXHIgIitGb3JlLk1BR0VOVEErIlsqXSIrRm9yZS5XSElURSsiIEF0dGFjayBEb25lICEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuIikKICAgICAgICAgICAgcmV0dXJuCgojcmVnaW9uIGdldApkZWYgZ2V0X3RhcmdldCh1cmwpOgogICAgdXJsID0gdXJsLnJzdHJpcCgpCiAgICB0YXJnZXQgPSB7fQogICAgdGFyZ2V0Wyd1cmknXSA9IHVybHBhcnNlKHVybCkucGF0aAogICAgaWYgdGFyZ2V0Wyd1cmknXSA9PSAiIjoKICAgICAgICB0YXJnZXRbJ3VyaSddID0gIi8iCiAgICB0YXJnZXRbJ2hvc3QnXSA9IHVybHBhcnNlKHVybCkubmV0bG9jCiAgICB0YXJnZXRbJ3NjaGVtZSddID0gdXJscGFyc2UodXJsKS5zY2hlbWUKICAgIGlmICI6IiBpbiB1cmxwYXJzZSh1cmwpLm5ldGxvYzoKICAgICAgICB0YXJnZXRbJ3BvcnQnXSA9IHVybHBhcnNlKHVybCkubmV0bG9jLnNwbGl0KCI6IilbMV0KICAgIGVsc2U6CiAgICAgICAgdGFyZ2V0Wydwb3J0J10gPSAiNDQzIiBpZiB1cmxwYXJzZSh1cmwpLnNjaGVtZSA9PSAiaHR0cHMiIGVsc2UgIjgwIgogICAgICAgIHBhc3MKICAgIHJldHVybiB0YXJnZXQKCmRlZiBnZXRfcHJveHlsaXN0KHR5cGUpOgogICAgaWYgdHlwZSA9PSAiU09DS1M1IjoKICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2FwaS5wcm94eXNjcmFwZS5jb20vP3JlcXVlc3Q9ZGlzcGxheXByb3hpZXMmcHJveHl0eXBlPXNvY2tzNSZ0aW1lb3V0PTEwMDAwJmNvdW50cnk9YWxsIikudGV4dAogICAgICAgIHIgKz0gcmVxdWVzdHMuZ2V0KCJodHRwczovL3d3dy5wcm94eS1saXN0LmRvd25sb2FkL2FwaS92MS9nZXQ/dHlwZT1zb2NrczUiKS50ZXh0CiAgICAgICAgb3BlbigiLi9yZXNvdXJjZXMvc29ja3M1LnR4dCIsICd3Jykud3JpdGUocikKICAgICAgICByID0gci5yc3RyaXAoKS5zcGxpdCgnXHJcbicpCiAgICAgICAgcmV0dXJuIHIKICAgIGVsaWYgdHlwZSA9PSAiSFRUUCI6CiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9hcGkucHJveHlzY3JhcGUuY29tLz9yZXF1ZXN0PWRpc3BsYXlwcm94aWVzJnByb3h5dHlwZT1odHRwJnRpbWVvdXQ9MTAwMDAmY291bnRyeT1hbGwiKS50ZXh0CiAgICAgICAgciArPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vd3d3LnByb3h5LWxpc3QuZG93bmxvYWQvYXBpL3YxL2dldD90eXBlPWh0dHAiKS50ZXh0CiAgICAgICAgb3BlbigiLi9yZXNvdXJjZXMvaHR0cC50eHQiLCAndycpLndyaXRlKHIpCiAgICAgICAgciA9IHIucnN0cmlwKCkuc3BsaXQoJ1xyXG4nKQogICAgICAgIHJldHVybiByCgpkZWYgZ2V0X3Byb3hpZXMoKToKICAgIGdsb2JhbCBwcm94aWVzCiAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoIi4vcHJveHkudHh0Iik6CiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIFsqXSIrRm9yZS5XSElURSsiIFlvdSBOZWVkIFByb3h5IEZpbGUgKCAuL3Byb3h5LnR4dCApXG4iKQogICAgICAgIHJldHVybiBGYWxzZQogICAgcHJveGllcyA9IG9wZW4oIi4vcHJveHkudHh0IiwgJ3InKS5yZWFkKCkuc3BsaXQoJ1xuJykKICAgIHJldHVybiBUcnVlCgpkZWYgZ2V0X2Nvb2tpZSh1cmwpOgogICAgZ2xvYmFsIHVzZXJhZ2VudCwgY29va2llSkFSLCBjb29raWUKICAgIG9wdGlvbnMgPSB3ZWJkcml2ZXIuQ2hyb21lT3B0aW9ucygpCiAgICBhcmd1bWVudHMgPSBbCiAgICAnLS1uby1zYW5kYm94JywgJy0tZGlzYWJsZS1zZXR1aWQtc2FuZGJveCcsICctLWRpc2FibGUtaW5mb2JhcnMnLCAnLS1kaXNhYmxlLWxvZ2dpbmcnLCAnLS1kaXNhYmxlLWxvZ2luLWFuaW1hdGlvbnMnLAogICAgJy0tZGlzYWJsZS1ub3RpZmljYXRpb25zJywgJy0tZGlzYWJsZS1ncHUnLCAnLS1oZWFkbGVzcycsICctLWxhbmc9a29fS1InLCAnLS1zdGFydC1tYXhtaXplZCcsCiAgICAnLS11c2VyLWFnZW50PU1vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTBfM18zIGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0LzYwMy4zLjggKEtIVE1MLCBsaWtlIEdlY2tvKSBNb2JpbGUvMTRHNjAgTWljcm9NZXNzZW5nZXIvNi41LjE4IE5ldFR5cGUvV0lGSSBMYW5ndWFnZS9lbicgCiAgICBdCiAgICBmb3IgYXJndW1lbnQgaW4gYXJndW1lbnRzOgogICAgICAgIG9wdGlvbnMuYWRkX2FyZ3VtZW50KGFyZ3VtZW50KQogICAgZHJpdmVyID0gd2ViZHJpdmVyLkNocm9tZShvcHRpb25zPW9wdGlvbnMpCiAgICBkcml2ZXIuaW1wbGljaXRseV93YWl0KDMpCiAgICBkcml2ZXIuZ2V0KHVybCkKICAgIGZvciBfIGluIHJhbmdlKDYwKToKICAgICAgICBjb29raWVzID0gZHJpdmVyLmdldF9jb29raWVzKCkKICAgICAgICB0cnl5ID0gMAogICAgICAgIGZvciBpIGluIGNvb2tpZXM6CiAgICAgICAgICAgIGlmIGlbJ25hbWUnXSA9PSAnY2ZfY2xlYXJhbmNlJzoKICAgICAgICAgICAgICAgIGNvb2tpZUpBUiA9IGRyaXZlci5nZXRfY29va2llcygpW3RyeXldCiAgICAgICAgICAgICAgICB1c2VyYWdlbnQgPSBkcml2ZXIuZXhlY3V0ZV9zY3JpcHQoInJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50IikKICAgICAgICAgICAgICAgIGNvb2tpZSA9IGYie2Nvb2tpZUpBUlsnbmFtZSddfT17Y29va2llSkFSWyd2YWx1ZSddfSIKICAgICAgICAgICAgICAgIGRyaXZlci5xdWl0KCkKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0cnl5ICs9IDEKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICBkcml2ZXIucXVpdCgpCiAgICByZXR1cm4gRmFsc2UKCmRlZiBzcG9vZih0YXJnZXQpOgogICAgYWRkciA9IFsxOTIsIDE2OCwgMCwgMV0KICAgIGQgPSAnLicKICAgIGFkZHJbMF0gPSBzdHIocmFuZG9tLnJhbmRyYW5nZSgxMSwgMTk3KSkKICAgIGFkZHJbMV0gPSBzdHIocmFuZG9tLnJhbmRyYW5nZSgwLCAyNTUpKQogICAgYWRkclsyXSA9IHN0cihyYW5kb20ucmFuZHJhbmdlKDAsIDI1NSkpCiAgICBhZGRyWzNdID0gc3RyKHJhbmRvbS5yYW5kcmFuZ2UoMiwgMjU0KSkKICAgIHNwb29maXAgPSBhZGRyWzBdICsgZCArIGFkZHJbMV0gKyBkICsgYWRkclsyXSArIGQgKyBhZGRyWzNdCiAgICByZXR1cm4gKAogICAgICAgICJYLUZvcndhcmRlZC1Qcm90bzogSHR0cFxyXG4iCiAgICAgICAgZiJYLUZvcndhcmRlZC1Ib3N0OiB7dGFyZ2V0Wydob3N0J119LCAxLjEuMS4xXHJcbiIKICAgICAgICBmIlZpYToge3Nwb29maXB9XHJcbiIKICAgICAgICBmIkNsaWVudC1JUDoge3Nwb29maXB9XHJcbiIKICAgICAgICBmJ1gtRm9yd2FyZGVkLUZvcjoge3Nwb29maXB9XHJcbicKICAgICAgICBmJ1JlYWwtSVA6IHtzcG9vZmlwfVxyXG4nCiAgICApCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCmRlZiBnZXRfaW5mb19sNygpOgogICAgc3Rkb3V0LndyaXRlKCJceDFiWzM4OzI7MjU1OzIwOzE0N20g4oCiICIrRm9yZS5XSElURSsiVVJMICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsiOiAiK0ZvcmUuTElHSFRHUkVFTl9FWCkKICAgIHRhcmdldCA9IGlucHV0KCkKICAgIHN0ZG91dC53cml0ZSgiXHgxYlszODsyOzI1NTsyMDsxNDdtIOKAoiAiK0ZvcmUuV0hJVEUrIlRIUkVBRCAgICIrRm9yZS5MSUdIVENZQU5fRVgrIjogIitGb3JlLkxJR0hUR1JFRU5fRVgpCiAgICB0aHJlYWQgPSBpbnB1dCgpCiAgICBzdGRvdXQud3JpdGUoIlx4MWJbMzg7MjsyNTU7MjA7MTQ3bSDigKIgIitGb3JlLldISVRFKyJUSU1FKHMpICAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQogICAgdCA9IGlucHV0KCkKICAgIHJldHVybiB0YXJnZXQsIHRocmVhZCwgdAoKZGVmIGdldF9pbmZvX2w0KCk6CiAgICBzdGRvdXQud3JpdGUoIlx4MWJbMzg7MjsyNTU7MjA7MTQ3bSDigKIgIitGb3JlLldISVRFKyJJUCAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQogICAgdGFyZ2V0ID0gaW5wdXQoKQogICAgc3Rkb3V0LndyaXRlKCJceDFiWzM4OzI7MjU1OzIwOzE0N20g4oCiICIrRm9yZS5XSElURSsiUE9SVCAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsiOiAiK0ZvcmUuTElHSFRHUkVFTl9FWCkKICAgIHBvcnQgPSBpbnB1dCgpCiAgICBzdGRvdXQud3JpdGUoIlx4MWJbMzg7MjsyNTU7MjA7MTQ3bSDigKIgIitGb3JlLldISVRFKyJUSFJFQUQgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQogICAgdGhyZWFkID0gaW5wdXQoKQogICAgc3Rkb3V0LndyaXRlKCJceDFiWzM4OzI7MjU1OzIwOzE0N20g4oCiICIrRm9yZS5XSElURSsiVElNRShzKSAgIitGb3JlLkxJR0hUQ1lBTl9FWCsiOiAiK0ZvcmUuTElHSFRHUkVFTl9FWCkKICAgIHQgPSBpbnB1dCgpCiAgICByZXR1cm4gdGFyZ2V0LCBwb3J0LCB0aHJlYWQsIHQKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKI3JlZ2lvbiBsYXllcjQKZGVmIHJ1bmZsb29kZXIoaG9zdCwgcG9ydCwgdGgsIHQpOgogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkKICAgIHJhbmQgPSByYW5kb20uX3VyYW5kb20oNDA5NikKICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOgogICAgICAgIHRyeToKICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Zmxvb2RlciwgYXJncz0oaG9zdCwgcG9ydCwgcmFuZCwgdW50aWwpKQogICAgICAgICAgICB0aGQuc3RhcnQoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwoKZGVmIGZsb29kZXIoaG9zdCwgcG9ydCwgcmFuZCwgdW50aWxfZGF0ZXRpbWUpOgogICAgc29jayA9IHNvY2tldC5zb2NrZXQoc29ja2V0LkFGX0lORVQsIHNvY2tldC5JUFBST1RPX0lHTVApCiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNvY2suc2VuZHRvKHJhbmQsIChob3N0LCBpbnQocG9ydCkpKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgc29jay5jbG9zZSgpCiAgICAgICAgICAgIHBhc3MKCgpkZWYgcnVuc2VuZGVyKGhvc3QsIHBvcnQsIHRoLCB0LCBwYXlsb2FkKToKICAgIGlmIHBheWxvYWQgPT0gIiI6CiAgICAgICAgcGF5bG9hZCA9IHJhbmRvbS5fdXJhbmRvbSg2MDAwMCkKICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpCiAgICAjcGF5bG9hZCA9IFBheWxvYWRzW21ldGhvZF0KICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOgogICAgICAgIHRyeToKICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c2VuZGVyLCBhcmdzPShob3N0LCBwb3J0LCB1bnRpbCwgcGF5bG9hZCkpCiAgICAgICAgICAgIHRoZC5zdGFydCgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgpkZWYgc2VuZGVyKGhvc3QsIHBvcnQsIHVudGlsX2RhdGV0aW1lLCBwYXlsb2FkKToKICAgIHNvY2sgPSBzb2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULCBzb2NrZXQuU09DS19ER1JBTSkKICAgIHNvY2suc2V0c29ja29wdChzb2NrZXQuU09MX1NPQ0tFVCwgc29ja2V0LlNPX1JFVVNFQUREUiwgMSkKICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOgogICAgICAgIHRyeToKICAgICAgICAgICAgc29jay5zZW5kdG8ocGF5bG9hZCwgKGhvc3QsIGludChwb3J0KSkpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBzb2NrLmNsb3NlKCkKICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAKI2VuZHJlZ2lvbgoKI3JlZ2lvbiBNRVRIT0QKCiNyZWdpb24gSEVBRAoKZGVmIExhdW5jaCh1cmwsIHRoLCB0LCBtZXRob2QpOiAjdGVzdGluZwogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkKICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZXhlYygidGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrIittZXRob2QrIiwgYXJncz0odXJsLCB1bnRpbCkpLnN0YXJ0KCkiKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwoKCmRlZiBMYXVuY2hIRUFEKHVybCwgdGgsIHQpOgogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkKICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOgogICAgICAgIHRyeToKICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrSEVBRCwgYXJncz0odXJsLCB1bnRpbCkpCiAgICAgICAgICAgIHRoZC5zdGFydCgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgpkZWYgQXR0YWNrSEVBRCh1cmwsIHVudGlsX2RhdGV0aW1lKToKICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVxdWVzdHMuaGVhZCh1cmwpCiAgICAgICAgICAgIHJlcXVlc3RzLmhlYWQodXJsKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwojZW5kcmVnaW9uCgojcmVnaW9uIFBPU1QKZGVmIExhdW5jaFBPU1QodXJsLCB0aCwgdCk6CiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tQT1NULCBhcmdzPSh1cmwsIHVudGlsKSkKICAgICAgICAgICAgdGhkLnN0YXJ0KCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKCmRlZiBBdHRhY2tQT1NUKHVybCwgdW50aWxfZGF0ZXRpbWUpOgogICAgd2hpbGUgKHVudGlsX2RhdGV0aW1lIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXF1ZXN0cy5wb3N0KHVybCkKICAgICAgICAgICAgcmVxdWVzdHMucG9zdCh1cmwpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCiNlbmRyZWdpb24KCiNyZWdpb24gUkFXCmRlZiBMYXVuY2hSQVcodXJsLCB0aCwgdCk6CiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tSQVcsIGFyZ3M9KHVybCwgdW50aWwpKQogICAgICAgICAgICB0aGQuc3RhcnQoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwoKZGVmIEF0dGFja1JBVyh1cmwsIHVudGlsX2RhdGV0aW1lKToKICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVxdWVzdHMuZ2V0KHVybCkKICAgICAgICAgICAgcmVxdWVzdHMuZ2V0KHVybCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKI2VuZHJlZ2lvbgoKI3JlZ2lvbiBQWFJBVwpkZWYgTGF1bmNoUFhSQVcodXJsLCB0aCwgdCk6CiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tQWFJBVywgYXJncz0odXJsLCB1bnRpbCkpCiAgICAgICAgICAgIHRoZC5zdGFydCgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgpkZWYgQXR0YWNrUFhSQVcodXJsLCB1bnRpbF9kYXRldGltZSk6CiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoKICAgICAgICBwcm94eSA9ICdodHRwOi8vJytzdHIocmFuZG9tLmNob2ljZShsaXN0KHByb3hpZXMpKSkKICAgICAgICBwcm94eSA9IHsKICAgICAgICAgICAgJ2h0dHAnOiBwcm94eSwgICAKICAgICAgICAgICAgJ2h0dHBzJzogcHJveHksCiAgICAgICAgfQogICAgICAgIHRyeToKICAgICAgICAgICAgcmVxdWVzdHMuZ2V0KHVybCwgcHJveGllcz1wcm94eSkKICAgICAgICAgICAgcmVxdWVzdHMuZ2V0KHVybCwgcHJveGllcz1wcm94eSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKI2VuZHJlZ2lvbgoKI3JlZ2lvbiBQWFNPQwpkZWYgTGF1bmNoUFhTT0ModXJsLCB0aCwgdCk6CiAgICB0YXJnZXQgPSBnZXRfdGFyZ2V0KHVybCkKICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpCiAgICByZXEgPSAgIkdFVCAiICt0YXJnZXRbJ3VyaSddICsgIiBIVFRQLzEuMVxyXG4iCiAgICByZXEgKz0gIkhvc3Q6ICIgKyB0YXJnZXRbJ2hvc3QnXSArICJcclxuIgogICAgcmVxICs9ICJVc2VyLUFnZW50OiAiICsgcmFuZG9tLmNob2ljZSh1YSkgKyAiXHJcbiIKICAgIHJlcSArPSAiQWNjZXB0OiB0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjlcclxuJyIKICAgIHJlcSArPSAiQ29ubmVjdGlvbjogS2VlcC1BbGl2ZVxyXG5cclxuIgogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tQWFNPQywgYXJncz0odGFyZ2V0LCB1bnRpbCwgcmVxKSkKICAgICAgICAgICAgdGhkLnN0YXJ0KCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKCmRlZiBBdHRhY2tQWFNPQyh0YXJnZXQsIHVudGlsX2RhdGV0aW1lLCByZXEpOgogICAgd2hpbGUgKHVudGlsX2RhdGV0aW1lIC0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkpLnRvdGFsX3NlY29uZHMoKSA+IDA6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBwcm94eSA9IHJhbmRvbS5jaG9pY2UobGlzdChwcm94aWVzKSkuc3BsaXQoIjoiKQogICAgICAgICAgICBpZiB0YXJnZXRbJ3NjaGVtZSddID09ICdodHRwcyc6CiAgICAgICAgICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpCiAgICAgICAgICAgICAgICBzLnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpCiAgICAgICAgICAgICAgICBzLnNldF9wcm94eShzb2Nrcy5IVFRQLCBzdHIocHJveHlbMF0pLCBpbnQocHJveHlbMV0pKQogICAgICAgICAgICAgICAgcy5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkKICAgICAgICAgICAgICAgIHMgPSBzc2wuY3JlYXRlX2RlZmF1bHRfY29udGV4dCgpLndyYXBfc29ja2V0KHMsIHNlcnZlcl9ob3N0bmFtZT10YXJnZXRbJ2hvc3QnXSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkKICAgICAgICAgICAgICAgIHMuc2V0c29ja29wdChzb2NrZXQuSVBQUk9UT19UQ1AsIHNvY2tldC5UQ1BfTk9ERUxBWSwgMSkKICAgICAgICAgICAgICAgIHMuc2V0X3Byb3h5KHNvY2tzLkhUVFAsIHN0cihwcm94eVswXSksIGludChwcm94eVsxXSkpCiAgICAgICAgICAgICAgICBzLmNvbm5lY3QoKHN0cih0YXJnZXRbJ2hvc3QnXSksIGludCh0YXJnZXRbJ3BvcnQnXSkpKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBmb3IgXyBpbiByYW5nZSgxMDApOgogICAgICAgICAgICAgICAgICAgIHMuc2VuZChzdHIuZW5jb2RlKHJlcSkpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHMuY2xvc2UoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcmV0dXJuCiNlbmRyZWdpb24KCiNyZWdpb24gU09DCmRlZiBMYXVuY2hTT0ModXJsLCB0aCwgdCk6CiAgICB0YXJnZXQgPSBnZXRfdGFyZ2V0KHVybCkKICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpCiAgICByZXEgPSAgIkdFVCAiK3RhcmdldFsndXJpJ10rIiBIVFRQLzEuMVxyXG5Ib3N0OiAiICsgdGFyZ2V0Wydob3N0J10gKyAiXHJcbiIKICAgIHJlcSArPSAiVXNlci1BZ2VudDogIiArIHJhbmRvbS5jaG9pY2UodWEpICsgIlxyXG4iCiAgICByZXEgKz0gIkFjY2VwdDogdGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45XHJcbiciCiAgICByZXEgKz0gIkNvbm5lY3Rpb246IEtlZXAtQWxpdmVcclxuXHJcbiIKICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOgogICAgICAgIHRyeToKICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrU09DLCBhcmdzPSh0YXJnZXQsIHVudGlsLCByZXEpKQogICAgICAgICAgICB0aGQuc3RhcnQoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwoKZGVmIEF0dGFja1NPQyh0YXJnZXQsIHVudGlsX2RhdGV0aW1lLCByZXEpOgogICAgaWYgdGFyZ2V0WydzY2hlbWUnXSA9PSAnaHR0cHMnOgogICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkKICAgICAgICBzLnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpCiAgICAgICAgcy5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkKICAgICAgICBzID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKS53cmFwX3NvY2tldChzLCBzZXJ2ZXJfaG9zdG5hbWU9dGFyZ2V0Wydob3N0J10pCiAgICBlbHNlOgogICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkKICAgICAgICBzLnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpCiAgICAgICAgcy5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkKICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOgogICAgICAgIHRyeToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTAwKToKICAgICAgICAgICAgICAgICAgICBzLnNlbmQoc3RyLmVuY29kZShyZXEpKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBzLmNsb3NlKCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKI2VuZHJlZ2lvbgoKZGVmIExhdW5jaFBQUyh1cmwsIHRoLCB0KToKICAgIHRhcmdldCA9IGdldF90YXJnZXQodXJsKQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkKICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOgogICAgICAgIHRyeToKICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrUFBTLCBhcmdzPSh0YXJnZXQsIHVudGlsKSkKICAgICAgICAgICAgdGhkLnN0YXJ0KCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKCmRlZiBBdHRhY2tQUFModGFyZ2V0LCB1bnRpbF9kYXRldGltZSk6ICMKICAgIGlmIHRhcmdldFsnc2NoZW1lJ10gPT0gJ2h0dHBzJzoKICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQogICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpCiAgICAgICAgcyA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkud3JhcF9zb2NrZXQocywgc2VydmVyX2hvc3RuYW1lPXRhcmdldFsnaG9zdCddKQogICAgZWxzZToKICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQogICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpCiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGZvciBfIGluIHJhbmdlKDEwMCk6CiAgICAgICAgICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUoIkdFVCAvIEhUVFAvMS4xXHJcblxyXG4iKSkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcy5jbG9zZSgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgpkZWYgTGF1bmNoTlVMTCh1cmwsIHRoLCB0KToKICAgIHRhcmdldCA9IGdldF90YXJnZXQodXJsKQogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkKICAgIHJlcSA9ICAiR0VUICIrdGFyZ2V0Wyd1cmknXSsiIEhUVFAvMS4xXHJcbkhvc3Q6ICIgKyB0YXJnZXRbJ2hvc3QnXSArICJcclxuIgogICAgcmVxICs9ICJVc2VyLUFnZW50OiBudWxsXHJcbiIKICAgIHJlcSArPSAiUmVmZXJyZXI6IG51bGxcclxuIgogICAgcmVxICs9IHNwb29mKHRhcmdldCkgKyAiXHJcbiIKICAgIGZvciBfIGluIHJhbmdlKGludCh0aCkpOgogICAgICAgIHRyeToKICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrTlVMTCwgYXJncz0odGFyZ2V0LCB1bnRpbCwgcmVxKSkKICAgICAgICAgICAgdGhkLnN0YXJ0KCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKCmRlZiBBdHRhY2tOVUxMKHRhcmdldCwgdW50aWxfZGF0ZXRpbWUsIHJlcSk6ICMKICAgIGlmIHRhcmdldFsnc2NoZW1lJ10gPT0gJ2h0dHBzJzoKICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQogICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpCiAgICAgICAgcyA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkud3JhcF9zb2NrZXQocywgc2VydmVyX2hvc3RuYW1lPXRhcmdldFsnaG9zdCddKQogICAgZWxzZToKICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQogICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpCiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGZvciBfIGluIHJhbmdlKDEwMCk6CiAgICAgICAgICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcy5jbG9zZSgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgpkZWYgTGF1bmNoU1BPT0YodXJsLCB0aCwgdCk6CiAgICB0YXJnZXQgPSBnZXRfdGFyZ2V0KHVybCkKICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpCiAgICByZXEgPSAgIkdFVCAiK3RhcmdldFsndXJpJ10rIiBIVFRQLzEuMVxyXG5Ib3N0OiAiICsgdGFyZ2V0Wydob3N0J10gKyAiXHJcbiIKICAgIHJlcSArPSAiVXNlci1BZ2VudDogIiArIHJhbmRvbS5jaG9pY2UodWEpICsgIlxyXG4iCiAgICByZXEgKz0gIkFjY2VwdDogdGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45XHJcbiciCiAgICByZXEgKz0gc3Bvb2YodGFyZ2V0KQogICAgcmVxICs9ICJDb25uZWN0aW9uOiBLZWVwLUFsaXZlXHJcblxyXG4iCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHRoZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PUF0dGFja1NQT09GLCBhcmdzPSh0YXJnZXQsIHVudGlsLCByZXEpKQogICAgICAgICAgICB0aGQuc3RhcnQoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwoKZGVmIEF0dGFja1NQT09GKHRhcmdldCwgdW50aWxfZGF0ZXRpbWUsIHJlcSk6ICMKICAgIGlmIHRhcmdldFsnc2NoZW1lJ10gPT0gJ2h0dHBzJzoKICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQogICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpCiAgICAgICAgcyA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkud3JhcF9zb2NrZXQocywgc2VydmVyX2hvc3RuYW1lPXRhcmdldFsnaG9zdCddKQogICAgZWxzZToKICAgICAgICBzID0gc29ja3Muc29ja3NvY2tldCgpCiAgICAgICAgcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQogICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpCiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGZvciBfIGluIHJhbmdlKDEwMCk6CiAgICAgICAgICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcy5jbG9zZSgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgpkZWYgTGF1bmNoUFhTUE9PRih1cmwsIHRoLCB0LCBwcm94eSk6CiAgICB0YXJnZXQgPSBnZXRfdGFyZ2V0KHVybCkKICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpCiAgICByZXEgPSAgIkdFVCAiK3RhcmdldFsndXJpJ10rIiBIVFRQLzEuMVxyXG5Ib3N0OiAiICsgdGFyZ2V0Wydob3N0J10gKyAiXHJcbiIKICAgIHJlcSArPSAiVXNlci1BZ2VudDogIiArIHJhbmRvbS5jaG9pY2UodWEpICsgIlxyXG4iCiAgICByZXEgKz0gIkFjY2VwdDogdGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45XHJcbiciCiAgICByZXEgKz0gc3Bvb2YodGFyZ2V0KQogICAgcmVxICs9ICJDb25uZWN0aW9uOiBLZWVwLUFsaXZlXHJcblxyXG4iCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJhbmRvbXByb3h5ID0gcmFuZG9tLmNob2ljZShwcm94eSkKICAgICAgICAgICAgdGhkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9QXR0YWNrUFhTUE9PRiwgYXJncz0odGFyZ2V0LCB1bnRpbCwgcmVxLCByYW5kb21wcm94eSkpCiAgICAgICAgICAgIHRoZC5zdGFydCgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgpkZWYgQXR0YWNrUFhTUE9PRih0YXJnZXQsIHVudGlsX2RhdGV0aW1lLCByZXEsIHByb3h5KTogIwogICAgcHJveHkgPSBwcm94eS5zcGxpdCgiOiIpCiAgICBwcmludChwcm94eSkKICAgIHRyeToKICAgICAgICBpZiB0YXJnZXRbJ3NjaGVtZSddID09ICdodHRwcyc6CiAgICAgICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkKICAgICAgICAgICAgI3Muc2V0c29ja29wdChzb2NrZXQuSVBQUk9UT19UQ1AsIHNvY2tldC5UQ1BfTk9ERUxBWSwgMSkKICAgICAgICAgICAgcy5zZXRfcHJveHkoc29ja3MuU09DS1M1LCBzdHIocHJveHlbMF0pLCBpbnQocHJveHlbMV0pKQogICAgICAgICAgICBzLmNvbm5lY3QoKHN0cih0YXJnZXRbJ2hvc3QnXSksIGludCh0YXJnZXRbJ3BvcnQnXSkpKQogICAgICAgICAgICBzID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKS53cmFwX3NvY2tldChzLCBzZXJ2ZXJfaG9zdG5hbWU9dGFyZ2V0Wydob3N0J10pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcyA9IHNvY2tzLnNvY2tzb2NrZXQoKQogICAgICAgICAgICAjcy5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQogICAgICAgICAgICBzLnNldF9wcm94eShzb2Nrcy5TT0NLUzUsIHN0cihwcm94eVswXSksIGludChwcm94eVsxXSkpCiAgICAgICAgICAgIHMuY29ubmVjdCgoc3RyKHRhcmdldFsnaG9zdCddKSwgaW50KHRhcmdldFsncG9ydCddKSkpCiAgICBleGNlcHQ6CiAgICAgICAgcmV0dXJuCiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGZvciBfIGluIHJhbmdlKDEwMCk6CiAgICAgICAgICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcy5jbG9zZSgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgojcmVnaW9uIENGQgpkZWYgTGF1bmNoQ0ZCKHVybCwgdGgsIHQpOgogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkKICAgIHNjcmFwZXIgPSBjbG91ZHNjcmFwZXIuY3JlYXRlX3NjcmFwZXIoKQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tDRkIsIGFyZ3M9KHVybCwgdW50aWwsIHNjcmFwZXIpKQogICAgICAgICAgICB0aGQuc3RhcnQoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwoKZGVmIEF0dGFja0NGQih1cmwsIHVudGlsX2RhdGV0aW1lLCBzY3JhcGVyKToKICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOgogICAgICAgIHRyeToKICAgICAgICAgICAgc2NyYXBlci5nZXQodXJsLCB0aW1lb3V0PTE1KQogICAgICAgICAgICBzY3JhcGVyLmdldCh1cmwsIHRpbWVvdXQ9MTUpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCiNlbmRyZWdpb24KCiNyZWdpb24gUFhDRkIKZGVmIExhdW5jaFBYQ0ZCKHVybCwgdGgsIHQpOgogICAgdW50aWwgPSBkYXRldGltZS5kYXRldGltZS5ub3coKSArIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludCh0KSkKICAgIHNjcmFwZXIgPSBjbG91ZHNjcmFwZXIuY3JlYXRlX3NjcmFwZXIoKQogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tQWENGQiwgYXJncz0odXJsLCB1bnRpbCwgc2NyYXBlcikpCiAgICAgICAgICAgIHRoZC5zdGFydCgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgpkZWYgQXR0YWNrUFhDRkIodXJsLCB1bnRpbF9kYXRldGltZSwgc2NyYXBlcik6CiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHByb3h5ID0gewogICAgICAgICAgICAgICAgICAgICdodHRwJzogJ2h0dHA6Ly8nK3N0cihyYW5kb20uY2hvaWNlKGxpc3QocHJveGllcykpKSwgICAKICAgICAgICAgICAgICAgICAgICAnaHR0cHMnOiAnaHR0cDovLycrc3RyKHJhbmRvbS5jaG9pY2UobGlzdChwcm94aWVzKSkpLAogICAgICAgICAgICB9CiAgICAgICAgICAgIHNjcmFwZXIuZ2V0KHVybCwgcHJveGllcz1wcm94eSkKICAgICAgICAgICAgc2NyYXBlci5nZXQodXJsLCBwcm94aWVzPXByb3h5KQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwojZW5kcmVnaW9uCgojcmVnaW9uIENGUFJPCmRlZiBMYXVuY2hDRlBSTyh1cmwsIHRoLCB0KToKICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpCiAgICBzZXNzaW9uID0gcmVxdWVzdHMuU2Vzc2lvbigpCiAgICBzY3JhcGVyID0gY2xvdWRzY3JhcGVyLmNyZWF0ZV9zY3JhcGVyKHNlc3M9c2Vzc2lvbikKICAgIGphciA9IFJlcXVlc3RzQ29va2llSmFyKCkKICAgIGphci5zZXQoY29va2llSkFSWyduYW1lJ10sIGNvb2tpZUpBUlsndmFsdWUnXSkKICAgIHNjcmFwZXIuY29va2llcyA9IGphcgogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tDRlBSTywgYXJncz0odXJsLCB1bnRpbCwgc2NyYXBlcikpCiAgICAgICAgICAgIHRoZC5zdGFydCgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgpkZWYgQXR0YWNrQ0ZQUk8odXJsLCB1bnRpbF9kYXRldGltZSwgc2NyYXBlcik6CiAgICBoZWFkZXJzID0gewogICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTBfM18zIGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0LzYwMy4zLjggKEtIVE1MLCBsaWtlIEdlY2tvKSBNb2JpbGUvMTRHNjAgTWljcm9NZXNzZW5nZXIvNi41LjE4IE5ldFR5cGUvV0lGSSBMYW5ndWFnZS9lbicsCiAgICAgICAgJ0FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjknLAogICAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAndHItVFIsdHI7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcnLAogICAgICAgICdBY2NlcHQtRW5jb2RpbmcnOiAnZGVmbGF0ZSwgZ3ppcDtxPTEuMCwgKjtxPTAuNScsCiAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUnLAogICAgICAgICdQcmFnbWEnOiAnbm8tY2FjaGUnLAogICAgICAgICdDb25uZWN0aW9uJzogJ2tlZXAtYWxpdmUnLAogICAgICAgICdVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzJzogJzEnLAogICAgICAgICdTZWMtRmV0Y2gtRGVzdCc6ICdkb2N1bWVudCcsCiAgICAgICAgJ1NlYy1GZXRjaC1Nb2RlJzogJ25hdmlnYXRlJywKICAgICAgICAnU2VjLUZldGNoLVNpdGUnOiAnc2FtZS1vcmlnaW4nLAogICAgICAgICdTZWMtRmV0Y2gtVXNlcic6ICc/MScsCiAgICAgICAgJ1RFJzogJ3RyYWlsZXJzJywKICAgIH0KICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOgogICAgICAgIHRyeToKICAgICAgICAgICAgc2NyYXBlci5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBhbGxvd19yZWRpcmVjdHM9RmFsc2UpCiAgICAgICAgICAgIHNjcmFwZXIuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgYWxsb3dfcmVkaXJlY3RzPUZhbHNlKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwojZW5kcmVnaW9uCgojcmVnaW9uIENGU09DCmRlZiBMYXVuY2hDRlNPQyh1cmwsIHRoLCB0KToKICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpCiAgICB0YXJnZXQgPSBnZXRfdGFyZ2V0KHVybCkKICAgIHJlcSA9ICAnR0VUICcrIHRhcmdldFsndXJpJ10gKycgSFRUUC8xLjFcclxuJwogICAgcmVxICs9ICdIb3N0OiAnICsgdGFyZ2V0Wydob3N0J10gKyAnXHJcbicKICAgIHJlcSArPSAnQWNjZXB0OiB0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjlcclxuJwogICAgcmVxICs9ICdBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyXHJcbicKICAgIHJlcSArPSAnQWNjZXB0LUxhbmd1YWdlOiBrbyxrby1LUjtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuN1xyXG4nCiAgICByZXEgKz0gJ0NhY2hlLUNvbnRyb2w6IG1heC1hZ2U9MFxyXG4nCiAgICByZXEgKz0gJ0Nvb2tpZTogJyArIGNvb2tpZSArICdcclxuJwogICAgcmVxICs9IGYnc2VjLWNoLXVhOiAiQ2hyb21pdW0iO3Y9IjEwMCIsICJHb29nbGUgQ2hyb21lIjt2PSIxMDAiXHJcbicKICAgIHJlcSArPSAnc2VjLWNoLXVhLW1vYmlsZTogPzBcclxuJwogICAgcmVxICs9ICdzZWMtY2gtdWEtcGxhdGZvcm06ICJXaW5kb3dzIlxyXG4nCiAgICByZXEgKz0gJ3NlYy1mZXRjaC1kZXN0OiBlbXB0eVxyXG4nCiAgICByZXEgKz0gJ3NlYy1mZXRjaC1tb2RlOiBjb3JzXHJcbicKICAgIHJlcSArPSAnc2VjLWZldGNoLXNpdGU6IHNhbWUtb3JpZ2luXHJcbicKICAgIHJlcSArPSAnQ29ubmVjdGlvbjogS2VlcC1BbGl2ZVxyXG4nCiAgICByZXEgKz0gJ1VzZXItQWdlbnQ6ICcgKyB1c2VyYWdlbnQgKyAnXHJcblxyXG5cclxuJwogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tDRlNPQyxhcmdzPSh1bnRpbCwgdGFyZ2V0LCByZXEsKSkKICAgICAgICAgICAgdGhkLnN0YXJ0KCkKICAgICAgICBleGNlcHQ6ICAKICAgICAgICAgICAgcGFzcwoKZGVmIEF0dGFja0NGU09DKHVudGlsX2RhdGV0aW1lLCB0YXJnZXQsIHJlcSk6CiAgICBpZiB0YXJnZXRbJ3NjaGVtZSddID09ICdodHRwcyc6CiAgICAgICAgcGFja2V0ID0gc29ja3Muc29ja3NvY2tldCgpCiAgICAgICAgcGFja2V0LnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpCiAgICAgICAgcGFja2V0LmNvbm5lY3QoKHN0cih0YXJnZXRbJ2hvc3QnXSksIGludCh0YXJnZXRbJ3BvcnQnXSkpKQogICAgICAgIHBhY2tldCA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkud3JhcF9zb2NrZXQocGFja2V0LCBzZXJ2ZXJfaG9zdG5hbWU9dGFyZ2V0Wydob3N0J10pCiAgICBlbHNlOgogICAgICAgIHBhY2tldCA9IHNvY2tzLnNvY2tzb2NrZXQoKQogICAgICAgIHBhY2tldC5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQogICAgICAgIHBhY2tldC5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkKICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOgogICAgICAgIHRyeToKICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTApOgogICAgICAgICAgICAgICAgcGFja2V0LnNlbmQoc3RyLmVuY29kZShyZXEpKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFja2V0LmNsb3NlKCkKICAgICAgICAgICAgcGFzcwojZW5kcmVnaW9uCgojcmVnaW9uIHRlc3R6b25lCmRlZiBhdHRhY2tTS1kodXJsLCB0aW1lciwgdGhyZWFkcyk6CiAgICBmb3IgaSBpbiByYW5nZShpbnQodGhyZWFkcykpOgogICAgICAgIHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PUxhdW5jaFNLWSwgYXJncz0odXJsLCB0aW1lcikpLnN0YXJ0KCkKCmRlZiBMYXVuY2hTS1kodXJsLCB0aW1lcik6CiAgICBwcm94eSA9IHJhbmRvbS5jaG9pY2UocHJveGllcykuc3RyaXAoKS5zcGxpdCgiOiIpCiAgICB0aW1lbG9sID0gdGltZS50aW1lKCkgKyBpbnQodGltZXIpCiAgICByZXEgPSAgIkdFVCAvIEhUVFAvMS4xXHJcbkhvc3Q6ICIgKyB1cmxwYXJzZSh1cmwpLm5ldGxvYyArICJcclxuIgogICAgcmVxICs9ICJDYWNoZS1Db250cm9sOiBuby1jYWNoZVxyXG4iCiAgICByZXEgKz0gIlVzZXItQWdlbnQ6ICIgKyByYW5kb20uY2hvaWNlKHVhKSArICJcclxuIgogICAgcmVxICs9ICJBY2NlcHQ6IHRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOVxyXG4nIgogICAgcmVxICs9ICJTZWMtRmV0Y2gtU2l0ZTogc2FtZS1vcmlnaW5cclxuIgogICAgcmVxICs9ICJTZWMtR1BDOiAxXHJcbiIKICAgIHJlcSArPSAiU2VjLUZldGNoLU1vZGU6IG5hdmlnYXRlXHJcbiIKICAgIHJlcSArPSAiU2VjLUZldGNoLURlc3Q6IGRvY3VtZW50XHJcbiIKICAgIHJlcSArPSAiVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0czogMVxyXG4iCiAgICByZXEgKz0gIkNvbm5lY3Rpb246IEtlZXAtQWxpdmVcclxuXHJcbiIKICAgIHdoaWxlIHRpbWUudGltZSgpIDwgdGltZWxvbDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHMgPSBzb2Nrcy5zb2Nrc29ja2V0KCkKICAgICAgICAgICAgcy5jb25uZWN0KChzdHIodXJscGFyc2UodXJsKS5uZXRsb2MpLCBpbnQoNDQzKSkpCiAgICAgICAgICAgIHMuc2V0X3Byb3h5KHNvY2tzLlNPQ0tTNSwgc3RyKHByb3h5WzBdKSwgaW50KHByb3h5WzFdKSkKICAgICAgICAgICAgY3R4ID0gc3NsLlNTTENvbnRleHQoKQogICAgICAgICAgICBzID0gY3R4LndyYXBfc29ja2V0KHMsIHNlcnZlcl9ob3N0bmFtZT11cmxwYXJzZSh1cmwpLm5ldGxvYykKICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTAwKToKICAgICAgICAgICAgICAgICAgICBzLnNlbmQoc3RyLmVuY29kZShyZXEpKQogICAgICAgICAgICAgICAgICAgIHMuc2VuZChzdHIuZW5jb2RlKHJlcSkpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHMuY2xvc2UoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcy5jbG9zZSgpCgpkZWYgYXR0YWNrU1RFTExBUih1cmwsIHRpbWVyLCB0aHJlYWRzKToKICAgIGZvciBpIGluIHJhbmdlKGludCh0aHJlYWRzKSk6CiAgICAgICAgdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9TGF1bmNoU1RFTExBUiwgYXJncz0odXJsLCB0aW1lcikpLnN0YXJ0KCkKCmRlZiBMYXVuY2hTVEVMTEFSKHVybCwgdGltZXIpOgogICAgdGltZWxvbCA9IHRpbWUudGltZSgpICsgaW50KHRpbWVyKQogICAgcmVxID0gICJHRVQgLyBIVFRQLzEuMVxyXG5Ib3N0OiAiICsgdXJscGFyc2UodXJsKS5uZXRsb2MgKyAiXHJcbiIKICAgIHJlcSArPSAiQ2FjaGUtQ29udHJvbDogbm8tY2FjaGVcclxuIgogICAgcmVxICs9ICJVc2VyLUFnZW50OiAiICsgcmFuZG9tLmNob2ljZSh1YSkgKyAiXHJcbiIKICAgIHJlcSArPSAiQWNjZXB0OiB0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjlcclxuJyIKICAgIHJlcSArPSAiU2VjLUZldGNoLVNpdGU6IHNhbWUtb3JpZ2luXHJcbiIKICAgIHJlcSArPSAiU2VjLUdQQzogMVxyXG4iCiAgICByZXEgKz0gIlNlYy1GZXRjaC1Nb2RlOiBuYXZpZ2F0ZVxyXG4iCiAgICByZXEgKz0gIlNlYy1GZXRjaC1EZXN0OiBkb2N1bWVudFxyXG4iCiAgICByZXEgKz0gIlVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHM6IDFcclxuIgogICAgcmVxICs9ICJDb25uZWN0aW9uOiBLZWVwLUFsaXZlXHJcblxyXG4iCiAgICB3aGlsZSB0aW1lLnRpbWUoKSA8IHRpbWVsb2w6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzID0gc29ja2V0LnNvY2tldChzb2NrZXQuQUZfSU5FVCwgc29ja2V0LlNPQ0tfU1RSRUFNKQogICAgICAgICAgICBzLmNvbm5lY3QoKHN0cih1cmxwYXJzZSh1cmwpLm5ldGxvYyksIGludCg0NDMpKSkKICAgICAgICAgICAgY3R4ID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKQogICAgICAgICAgICBzID0gY3R4LndyYXBfc29ja2V0KHMsIHNlcnZlcl9ob3N0bmFtZT11cmxwYXJzZSh1cmwpLm5ldGxvYykKICAgICAgICAgICAgcy5zZW5kKHN0ci5lbmNvZGUocmVxKSkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTAwKToKICAgICAgICAgICAgICAgICAgICBzLnNlbmQoc3RyLmVuY29kZShyZXEpKQogICAgICAgICAgICAgICAgICAgIHMuc2VuZChzdHIuZW5jb2RlKHJlcSkpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHMuY2xvc2UoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcy5jbG9zZSgpCiNlbmRyZWdpb24KCmRlZiBMYXVuY2hIVFRQMih1cmwsIHRoLCB0KToKICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToKICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tIVFRQMiwgYXJncz0odXJsLCB1bnRpbCkpLnN0YXJ0KCkKCmRlZiBBdHRhY2tIVFRQMih1cmwsIHVudGlsX2RhdGV0aW1lKToKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgICAgICdVc2VyLUFnZW50JzogcmFuZG9tLmNob2ljZSh1YSksCiAgICAgICAgICAgICdBY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45JywKICAgICAgICAgICAgJ0FjY2VwdC1MYW5ndWFnZSc6ICd0ci1UUix0cjtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNycsCiAgICAgICAgICAgICdBY2NlcHQtRW5jb2RpbmcnOiAnZGVmbGF0ZSwgZ3ppcDtxPTEuMCwgKjtxPTAuNScsCiAgICAgICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJywKICAgICAgICAgICAgJ1ByYWdtYSc6ICduby1jYWNoZScsCiAgICAgICAgICAgICdDb25uZWN0aW9uJzogJ2tlZXAtYWxpdmUnLAogICAgICAgICAgICAnVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0cyc6ICcxJywKICAgICAgICAgICAgJ1NlYy1GZXRjaC1EZXN0JzogJ2RvY3VtZW50JywKICAgICAgICAgICAgJ1NlYy1GZXRjaC1Nb2RlJzogJ25hdmlnYXRlJywKICAgICAgICAgICAgJ1NlYy1GZXRjaC1TaXRlJzogJ3NhbWUtb3JpZ2luJywKICAgICAgICAgICAgJ1NlYy1GZXRjaC1Vc2VyJzogJz8xJywKICAgICAgICAgICAgJ1RFJzogJ3RyYWlsZXJzJywKICAgICAgICAgICAgfQogICAgY2xpZW50ID0gaHR0cHguQ2xpZW50KGh0dHAyPVRydWUpCiAgICB3aGlsZSAodW50aWxfZGF0ZXRpbWUgLSBkYXRldGltZS5kYXRldGltZS5ub3coKSkudG90YWxfc2Vjb25kcygpID4gMDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGNsaWVudC5nZXQodXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgICAgIGNsaWVudC5nZXQodXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgpkZWYgTGF1bmNoUFhIVFRQMih1cmwsIHRoLCB0KToKICAgIHVudGlsID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQodCkpCiAgICBmb3IgXyBpbiByYW5nZShpbnQodGgpKToKICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1BdHRhY2tIVFRQMiwgYXJncz0odXJsLCB1bnRpbCkpLnN0YXJ0KCkKCmRlZiBBdHRhY2tQWEhUVFAyKHVybCwgdW50aWxfZGF0ZXRpbWUpOgogICAgaGVhZGVycyA9IHsKICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiByYW5kb20uY2hvaWNlKHVhKSwKICAgICAgICAgICAgJ0FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjknLAogICAgICAgICAgICAnQWNjZXB0LUxhbmd1YWdlJzogJ3RyLVRSLHRyO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43JywKICAgICAgICAgICAgJ0FjY2VwdC1FbmNvZGluZyc6ICdkZWZsYXRlLCBnemlwO3E9MS4wLCAqO3E9MC41JywKICAgICAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUnLAogICAgICAgICAgICAnUHJhZ21hJzogJ25vLWNhY2hlJywKICAgICAgICAgICAgJ0Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsCiAgICAgICAgICAgICdVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzJzogJzEnLAogICAgICAgICAgICAnU2VjLUZldGNoLURlc3QnOiAnZG9jdW1lbnQnLAogICAgICAgICAgICAnU2VjLUZldGNoLU1vZGUnOiAnbmF2aWdhdGUnLAogICAgICAgICAgICAnU2VjLUZldGNoLVNpdGUnOiAnc2FtZS1vcmlnaW4nLAogICAgICAgICAgICAnU2VjLUZldGNoLVVzZXInOiAnPzEnLAogICAgICAgICAgICAnVEUnOiAndHJhaWxlcnMnLAogICAgICAgICAgICB9CiAgICAKICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOgogICAgICAgIHRyeToKICAgICAgICAgICAgY2xpZW50ID0gaHR0cHguQ2xpZW50KAogICAgICAgICAgICAgICAgaHR0cDI9VHJ1ZSwKICAgICAgICAgICAgICAgIHByb3hpZXM9ewogICAgICAgICAgICAgICAgICAgICdodHRwOi8vJzogJ2h0dHA6Ly8nK3JhbmRvbS5jaG9pY2UocHJveGllcyksCiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vJzogJ2h0dHA6Ly8nK3JhbmRvbS5jaG9pY2UocHJveGllcyksCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICApCiAgICAgICAgICAgIGNsaWVudC5nZXQodXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgICAgIGNsaWVudC5nZXQodXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCgpkZWYgdGVzdDEodXJsLCB0aCwgdCk6CiAgICB1bnRpbCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpICsgZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHQpKQogICAgdGFyZ2V0ID0gZ2V0X3RhcmdldCh1cmwpCiAgICByZXEgPSAgJ0dFVCAnKyB0YXJnZXRbJ3VyaSddICsnIEhUVFAvMS4xXHJcbicKICAgIHJlcSArPSAnSG9zdDogJyArIHRhcmdldFsnaG9zdCddICsgJ1xyXG4nCiAgICByZXEgKz0gJ0FjY2VwdDogdGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45XHJcbicKICAgIHJlcSArPSAnQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlLCBiclxyXG4nCiAgICByZXEgKz0gJ0FjY2VwdC1MYW5ndWFnZToga28sa28tS1I7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjdcclxuJwogICAgcmVxICs9ICdDYWNoZS1Db250cm9sOiBtYXgtYWdlPTBcclxuJwogICAgI3JlcSArPSAnQ29va2llOiAnICsgY29va2llICsgJ1xyXG4nCiAgICByZXEgKz0gZidzZWMtY2gtdWE6ICJDaHJvbWl1bSI7dj0iMTAwIiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEwMCJcclxuJwogICAgcmVxICs9ICdzZWMtY2gtdWEtbW9iaWxlOiA/MFxyXG4nCiAgICByZXEgKz0gJ3NlYy1jaC11YS1wbGF0Zm9ybTogIldpbmRvd3MiXHJcbicKICAgIHJlcSArPSAnc2VjLWZldGNoLWRlc3Q6IGVtcHR5XHJcbicKICAgIHJlcSArPSAnc2VjLWZldGNoLW1vZGU6IGNvcnNcclxuJwogICAgcmVxICs9ICdzZWMtZmV0Y2gtc2l0ZTogc2FtZS1vcmlnaW5cclxuJwogICAgcmVxICs9ICdDb25uZWN0aW9uOiBLZWVwLUFsaXZlXHJcbicKICAgIHJlcSArPSAnVXNlci1BZ2VudDogTW96aWxsYS81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyAxMF8zXzMgbGlrZSBNYWMgT1MgWCkgQXBwbGVXZWJLaXQvNjAzLjMuOCAoS0hUTUwsIGxpa2UgR2Vja28pIE1vYmlsZS8xNEc2MCBNaWNyb01lc3Nlbmdlci82LjUuMTggTmV0VHlwZS9XSUZJIExhbmd1YWdlL2VuXHJcblxyXG5cclxuJwogICAgZm9yIF8gaW4gcmFuZ2UoaW50KHRoKSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB0aGQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD10ZXN0MixhcmdzPSh1bnRpbCwgdGFyZ2V0LCByZXEsKSkKICAgICAgICAgICAgdGhkLnN0YXJ0KCkKICAgICAgICBleGNlcHQ6ICAKICAgICAgICAgICAgcGFzcwoKZGVmIHRlc3QyKHVudGlsX2RhdGV0aW1lLCB0YXJnZXQsIHJlcSk6CiAgICBpZiB0YXJnZXRbJ3NjaGVtZSddID09ICdodHRwcyc6CiAgICAgICAgcGFja2V0ID0gc29ja3Muc29ja3NvY2tldCgpCiAgICAgICAgcGFja2V0LnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpCiAgICAgICAgcGFja2V0LmNvbm5lY3QoKHN0cih0YXJnZXRbJ2hvc3QnXSksIGludCh0YXJnZXRbJ3BvcnQnXSkpKQogICAgICAgIHBhY2tldCA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkud3JhcF9zb2NrZXQocGFja2V0LCBzZXJ2ZXJfaG9zdG5hbWU9dGFyZ2V0Wydob3N0J10pCiAgICBlbHNlOgogICAgICAgIHBhY2tldCA9IHNvY2tzLnNvY2tzb2NrZXQoKQogICAgICAgIHBhY2tldC5zZXRzb2Nrb3B0KHNvY2tldC5JUFBST1RPX1RDUCwgc29ja2V0LlRDUF9OT0RFTEFZLCAxKQogICAgICAgIHBhY2tldC5jb25uZWN0KChzdHIodGFyZ2V0Wydob3N0J10pLCBpbnQodGFyZ2V0Wydwb3J0J10pKSkKICAgIHdoaWxlICh1bnRpbF9kYXRldGltZSAtIGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpKS50b3RhbF9zZWNvbmRzKCkgPiAwOgogICAgICAgIHRyeToKICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UoMTApOgogICAgICAgICAgICAgICAgcGFja2V0LnNlbmQoc3RyLmVuY29kZShyZXEpKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFja2V0LmNsb3NlKCkKICAgICAgICAgICAgcGFzcwoKCiNlbmRyZWdpb24KCmRlZiBjbGVhcigpOiAKICAgIGlmIG5hbWUgPT0gJ250JzogCiAgICAgICAgc3lzdGVtKCdjbHMnKQogICAgZWxzZTogCiAgICAgICAgc3lzdGVtKCdjbGVhcicpCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKZGVmIGhlbHAoKToKICAgIGNsZWFyKCkKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVFdISVRFX0VYICAgKyIgIOKVpiDilabilZTilZDilZfilaYgIOKVlOKVkOKVlyAgICAgICAgICAgICBcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgKyIgIOKVoOKVkOKVo+KVkeKVoyDilZEgIOKVoOKVkOKVnSAgICAgICAgICAgICBcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgKyIgIOKVqSDilanilZrilZDilZ3ilanilZDilZ3ilakgICAgICAgICAgICAgICAgXG4iKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsiICAgICAgICDilZDilZDilabilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilabilZDilZBcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilanilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilanilZDilZDilZDilZDilZDilZDilZDilZDilZDilZdcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJsYXllcjcgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBTaG93IExheWVyNyBNZXRob2RzICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJsYXllcjQgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBTaG93IExheWVyNCBNZXRob2RzICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJ0b29scyAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBTaG93IHRvb2xzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJjcmVkaXQgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBTaG93IGNyZWRpdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJleGl0ICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBFeGl0IEtBUk1BIEREb1MgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilaDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilaNcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJUSEFOSyAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBUaGFua3MgZm9yIHVzaW5nIEtBUk1BLiAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJZT1XimaUgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrInwiK0ZvcmUuTElHSFRXSElURV9FWCsiIFBseiBzdGFyIHByb2plY3QgOikgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrImdpdGh1YiAgICIrRm9yZS5MSUdIVENZQU5fRVgrInwiK0ZvcmUuTElHSFRXSElURV9FWCsiIGdpdGh1Yi5jb20vSHl1a0lzQmFjay9LQVJNQS1ERG9TICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnVxuIikKICAgIHN0ZG91dC53cml0ZSgiXG4iKQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCmRlZiBjcmVkaXQoKToKICAgIHN0ZG91dC53cml0ZSgiXHgxYlszODsyOzA7MjM2OzI1MG3ilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZdcbiIpCiAgICBzdGRvdXQud3JpdGUoIlx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCAgICsiRGV2ZWxvcGVyICIrRm9yZS5SRUQrIjogXHgxYlszODsyOzA7MjU1OzE4OW1IeXVrXG4iKQogICAgc3Rkb3V0LndyaXRlKCJceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVggICArIlVJIERlc2lnbiAiK0ZvcmUuUkVEKyI6IFx4MWJbMzg7MjswOzI1NTsxODltWW9uZeS4jVxuIikKICAgIHN0ZG91dC53cml0ZSgiXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYICAgKyJNZXRob2RzL1Rvb2xzICIrRm9yZS5SRUQrIjogXHgxYlszODsyOzA7MjU1OzE4OW1Ta3lXdGtoXG4iKQogICAgc3Rkb3V0LndyaXRlKCJceDFiWzM4OzI7MDsyMzY7MjUwbeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnVxuIikKICAgIHN0ZG91dC53cml0ZSgiXG4iKSAgICAKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpkZWYgbGF5ZXI3KCk6CiAgICBjbGVhcigpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4iKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRXSElURV9FWCAgICsi4pWmICDilZTilZDilZfilaYg4pWm4pWU4pWQ4pWX4pWm4pWQ4pWXIOKVkOKVkOKVlyAgICAgICAgICAgICBcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgKyLilZEgIOKVoOKVkOKVo+KVmuKVpuKVneKVkeKVoyDilaDilabilZ0gIOKVlOKVnSAgICAgICAgICAgICBcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgKyLilanilZDilZ3ilakg4pWpIOKVqSDilZrilZDilZ3ilanilZrilZAgIOKVqSAgICAgICAgICAgICAgXG4iKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsiICAgICAgICDilZDilZDilabilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilabilZDilZBcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVl1xuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsiY2ZiICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIiB8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBCeXBhc3MgQ0YgQXR0YWNrICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsicHhjZmIgICIrRm9yZS5MSUdIVENZQU5fRVgrIiB8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBCeXBhc3MgQ0YgQXR0YWNrIFdpdGggUHJveHkgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikgICAgICAgICAgICAgICAgICAKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsiY2ZyZXEgICIrRm9yZS5MSUdIVENZQU5fRVgrIiB8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBCeXBhc3MgQ0YgVUFNLCBDQVBUQ0hBLCBCRk0gKHJlcXVlc3QpICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsiY2Zzb2MgICIrRm9yZS5MSUdIVENZQU5fRVgrIiB8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBCeXBhc3MgQ0YgVUFNLCBDQVBUQ0hBLCBCRk0gKHNvY2tldCkgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsicHhza3kgICIrRm9yZS5MSUdIVENZQU5fRVgrIiB8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBCeXBhc3MgR29vZ2xlIFByb2plY3QgU2hpZWxkLCBWc2hpZWxkLCAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3bSAgIitGb3JlLkxJR0hUV0hJVEVfRVgrIiAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgfCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgRERvUyBHdWFyZCBGcmVlLCBDRiBOb1NlYyBXaXRoIFByb3h5ICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrInNreSAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgfCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgU2t5IG1ldGhvZCB3aXRob3V0IHByb3h5ICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrImh0dHAyICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgfCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgSFRUUCAyLjAgUmVxdWVzdCBBdHRhY2sgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrInB4aHR0cDIiK0ZvcmUuTElHSFRDWUFOX0VYKyIgfCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgSFRUUCAyLjAgUmVxdWVzdCBBdHRhY2sgV2l0aCBQcm94eSAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrImdldCAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgfCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgR2V0IFJlcXVlc3QgQXR0YWNrICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrInBvc3QgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgfCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgUG9zdCBSZXF1ZXN0IEF0dGFjayAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrImhlYWQgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgfCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgSGVhZCBSZXF1ZXN0IEF0dGFjayAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrInBwcyAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgfCIrRm9yZS5MSUdIVFdISVRFX0VYKyIgT25seSBHRVQgLyBIVFRQLzEuMSAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZFcbiIpCiAgICAKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsic3Bvb2YgICIrRm9yZS5MSUdIVENZQU5fRVgrIiB8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBIVFRQIFNwb29mIFNvY2tldCBBdHRhY2sgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsi4pWRIFx4MWJbMzg7MjsyNTU7MjA7MTQ3beKAoiAiK0ZvcmUuTElHSFRXSElURV9FWCsicHhzcG9vZiIrRm9yZS5MSUdIVENZQU5fRVgrIiB8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBIVFRQIFNwb29mIFNvY2tldCBBdHRhY2sgV2l0aCBQcm94eSAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikKICAgIAogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJzb2MgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsiIHwiK0ZvcmUuTElHSFRXSElURV9FWCsiIFNvY2tldCBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRXG4iKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJweHJhdyAgIitGb3JlLkxJR0hUQ1lBTl9FWCsiIHwiK0ZvcmUuTElHSFRXSElURV9FWCsiIFByb3h5IFJlcXVlc3QgQXR0YWNrICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRXG4iKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJweHNvYyAgIitGb3JlLkxJR0hUQ1lBTl9FWCsiIHwiK0ZvcmUuTElHSFRXSElURV9FWCsiIFByb3h5IFNvY2tldCBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRXG4iKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ1cbiIpIAogICAgc3Rkb3V0LndyaXRlKCJcbiIpCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKZGVmIGxheWVyNCgpOgogICAgY2xlYXIoKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUV0hJVEVfRVggICArIuKVpiAg4pWU4pWQ4pWX4pWmIOKVpuKVlOKVkOKVl+KVpuKVkOKVlyDilaYg4pWmICAgICAgICAgICAgIFxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICArIuKVkSAg4pWg4pWQ4pWj4pWa4pWm4pWd4pWR4pWjIOKVoOKVpuKVnSDilZrilZDilaMgICAgICAgICAgICAgXG4iKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICsi4pWp4pWQ4pWd4pWpIOKVqSDilakg4pWa4pWQ4pWd4pWp4pWa4pWQICAg4pWpICAgICAgICAgICAgICBcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyIgICAgICAgIOKVkOKVkOKVpuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVpuKVkOKVkFxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVl1xuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrInVkcCAgICIrRm9yZS5MSUdIVENZQU5fRVgrInwiK0ZvcmUuTElHSFRXSElURV9FWCsiIFVEUCBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVkSBceDFiWzM4OzI7MjU1OzIwOzE0N23igKIgIitGb3JlLkxJR0hUV0hJVEVfRVgrInRjcCAgICIrRm9yZS5MSUdIVENZQU5fRVgrInwiK0ZvcmUuTElHSFRXSElURV9FWCsiIFRDUCBBdHRhY2sgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVkVxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnVxuIikgCiAgICBzdGRvdXQud3JpdGUoIlxuIikKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpkZWYgdG9vbHMoKToKICAgIGNsZWFyKCkKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVFdISVRFX0VYICAgKyLilZTilabilZfilZTilZDilZfilZTilZDilZfilaYgIOKVlOKVkOKVlyAgICAgICAgICAgICBcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgKyIg4pWRIOKVkSDilZHilZEg4pWR4pWRICDilZrilZDilZcgICAgICAgICAgICAgXG4iKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICsiIOKVqSDilZrilZDilZ3ilZrilZDilZ3ilanilZDilZ3ilZrilZDilZ0gICAgICAgICAgICAgXG4iKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCAgICAgICAgICAgICsiICAgICAgICDilZDilZDilabilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilabilZDilZBcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilanilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilanilZDilZDilZDilZDilZDilZDilZDilZDilZDilZdcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJnZW9pcCAiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBHZW8gSVAgQWRkcmVzcyBMb29rdXAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgICAgICAgICAgICAgICAgICAgICDilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJkbnMgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBDbGFzc2ljIEROUyBMb29rdXAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgICAgICAgICAgICAgICAgICAgICDilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZEgXHgxYlszODsyOzI1NTsyMDsxNDdt4oCiICIrRm9yZS5MSUdIVFdISVRFX0VYKyJzdWJuZXQiK0ZvcmUuTElHSFRDWUFOX0VYKyJ8IitGb3JlLkxJR0hUV0hJVEVfRVgrIiBTdWJuZXQgSVAgQWRkcmVzcyBMb29rdXAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyIgICAgICAgICAgICAgICDilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgICAgICAgICAgKyLilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ1cbiIpIAogICAgc3Rkb3V0LndyaXRlKCJcbiIpCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKZGVmIHRpdGxlKCk6CiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIitGb3JlLkxJR0hUV0hJVEVfRVggICsi4pWm4pWU4pWQ4pWU4pWQ4pWX4pWm4pWQ4pWX4pWU4pWm4pWX4pWU4pWQ4pWXICAgICAgICAgICAgICAgICBcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICArIuKVoOKVqeKVl+KVoOKVkOKVo+KVoOKVpuKVneKVkeKVkeKVkeKVoOKVkOKVoyAgICAgICAgICAgICAgICAgXG4iKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYICAgKyLilakg4pWp4pWpIOKVqeKVqeKVmuKVkOKVqSDilanilakg4pWpICAgICAgICAgICAgICAgIFxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVggICAgICAgICAgICArIiAgICAgICAg4pWQ4pWQ4pWm4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWm4pWQ4pWQXG4iKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWp4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWp4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXXG4iKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRICIrRm9yZS5MSUdIVFdISVRFX0VYICAgKyIgICAgICAgIFdlbGNvbWUgVG8gVGhlIE1haW4gU2NyZWVuIE9mIEthcm1hICAiK0ZvcmUuTElHSFRDWUFOX0VYICArIiAgICAgICDilZFcbiIpCiAgICBzdGRvdXQud3JpdGUoIiAgICAgICAgICAgICAiK0ZvcmUuTElHSFRDWUFOX0VYKyLilZEgIitGb3JlLkxJR0hUV0hJVEVfRVggICArIiAgICAgICAgICBUeXBlIFtoZWxwXSB0byBzZWUgdGhlIENvbW1hbmRzICAgICIrRm9yZS5MSUdIVENZQU5fRVggKyIgICAgICAg4pWRXG4iKQogICAgc3Rkb3V0LndyaXRlKCIgICAgICAgICAgICAgIitGb3JlLkxJR0hUQ1lBTl9FWCsi4pWRICIrRm9yZS5MSUdIVFdISVRFX0VYICAgKyIgICAgICAgICBDb250YWN0IERldiAtIFRlbGVncmFtIEB6amZvcTM5NCAgICIrRm9yZS5MSUdIVENZQU5fRVggKyIgICAgICAgIOKVkVxuIikKICAgIHN0ZG91dC53cml0ZSgiICAgICAgICAgICAgICIrRm9yZS5MSUdIVENZQU5fRVgrIuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnVxuIikKICAgIHN0ZG91dC53cml0ZSgiXG4iKQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCmRlZiBjb21tYW5kKCk6CiAgICBzdGRvdXQud3JpdGUoRm9yZS5MSUdIVENZQU5fRVgrIuKVlOKVkOKVkOKVkCIrRm9yZS5MSUdIVENZQU5fRVgrIlsiInJvb3QiK0ZvcmUuTElHSFRHUkVFTl9FWCsiQCIrRm9yZS5MSUdIVENZQU5fRVgrIkthcm1hIitGb3JlLkNZQU4rIl0iK0ZvcmUuTElHSFRDWUFOX0VYKyJcbuKVmuKVkOKVkFx4MWJbMzg7MjswOzI1NTsxODltPiAiK0ZvcmUuV0hJVEUpCiAgICBjb21tYW5kID0gaW5wdXQoKQogICAgaWYgY29tbWFuZCA9PSAiY2xzIiBvciBjb21tYW5kID09ICJjbGVhciI6CiAgICAgICAgY2xlYXIoKQogICAgICAgIHRpdGxlKCkKICAgIGVsaWYgY29tbWFuZCA9PSAiaGVscCIgb3IgY29tbWFuZCA9PSAiPyI6CiAgICAgICAgaGVscCgpCiAgICBlbGlmIGNvbW1hbmQgPT0gImNyZWRpdCI6CiAgICAgICAgY3JlZGl0KCkgICAgICAgIAogICAgZWxpZiBjb21tYW5kID09ICJsYXllcjciIG9yIGNvbW1hbmQgPT0gIkxBWUVSNyIgb3IgY29tbWFuZCA9PSAibDciIG9yIGNvbW1hbmQgPT0gIkw3IiBvciBjb21tYW5kID09ICJMYXllcjciOgogICAgICAgIGxheWVyNygpCiAgICBlbGlmIGNvbW1hbmQgPT0gImxheWVyNCIgb3IgY29tbWFuZCA9PSAiTEFZRVI0IiBvciBjb21tYW5kID09ICJsNCIgb3IgY29tbWFuZCA9PSAiTDQiIG9yIGNvbW1hbmQgPT0gIkxheWVyNCI6CiAgICAgICAgbGF5ZXI0KCkKICAgIGVsaWYgY29tbWFuZCA9PSAidG9vbHMiIG9yIGNvbW1hbmQgPT0gInRvb2wiOgogICAgICAgIHRvb2xzKCkKICAgIGVsaWYgY29tbWFuZCA9PSAiZXhpdCI6CiAgICAgICAgZXhpdCgpCiAgICBlbGlmIGNvbW1hbmQgPT0gInRlc3QiOgogICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQogICAgICAgIHRlc3QxKHRhcmdldCwgdGhyZWFkLCB0KQogICAgICAgIHRpbWUuc2xlZXAoMTApCiAgICBlbGlmIGNvbW1hbmQgPT0gImh0dHAyIiBvciBjb21tYW5kID09ICJIVFRQMiI6CiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkKICAgICAgICB0aW1lci5zdGFydCgpCiAgICAgICAgTGF1bmNoSFRUUDIodGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgdGltZXIuam9pbigpCiAgICBlbGlmIGNvbW1hbmQgPT0gInB4aHR0cDIiIG9yIGNvbW1hbmQgPT0gIlBYSFRUUDIiOgogICAgICAgIGlmIGdldF9wcm94aWVzKCk6CiAgICAgICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQogICAgICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQogICAgICAgICAgICB0aW1lci5zdGFydCgpCiAgICAgICAgICAgIExhdW5jaFBYSFRUUDIodGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQogICAgZWxpZiBjb21tYW5kID09ICJjZmIiIG9yIGNvbW1hbmQgPT0gIkNGQiI6CiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkKICAgICAgICB0aW1lci5zdGFydCgpCiAgICAgICAgTGF1bmNoQ0ZCKHRhcmdldCwgdGhyZWFkLCB0KQogICAgICAgIHRpbWVyLmpvaW4oKQogICAgZWxpZiBjb21tYW5kID09ICJweGNmYiIgb3IgY29tbWFuZCA9PSAiUFhDRkIiOgogICAgICAgIGlmIGdldF9wcm94aWVzKCk6CiAgICAgICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQogICAgICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQogICAgICAgICAgICB0aW1lci5zdGFydCgpCiAgICAgICAgICAgIExhdW5jaFBYQ0ZCKHRhcmdldCwgdGhyZWFkLCB0KQogICAgICAgICAgICB0aW1lci5qb2luKCkKICAgIGVsaWYgY29tbWFuZCA9PSAicHBzIiBvciBjb21tYW5kID09ICJQUFMiOgogICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpCiAgICAgICAgdGltZXIuc3RhcnQoKQogICAgICAgIExhdW5jaFBQUyh0YXJnZXQsIHRocmVhZCwgdCkKICAgICAgICB0aW1lci5qb2luKCkgCiAgICBlbGlmIGNvbW1hbmQgPT0gInNwb29mIiBvciBjb21tYW5kID09ICJTUE9PRiI6CiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkKICAgICAgICB0aW1lci5zdGFydCgpCiAgICAgICAgTGF1bmNoU1BPT0YodGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgdGltZXIuam9pbigpIAogICAgZWxpZiBjb21tYW5kID09ICJweHNwb29mIiBvciBjb21tYW5kID09ICJQWFNQT09GIjoKICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkKICAgICAgICAjdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkKICAgICAgICAjdGltZXIuc3RhcnQoKQogICAgICAgIExhdW5jaFBYU1BPT0YodGFyZ2V0LCB0aHJlYWQsIHQsIGdldF9wcm94eWxpc3QoIlNPQ0tTNSIpKQogICAgICAgICN0aW1lci5qb2luKCkKICAgICAgICB0aW1lLnNsZWVwKDEwMDApCiAgICBlbGlmIGNvbW1hbmQgPT0gImdldCIgb3IgY29tbWFuZCA9PSAiR0VUIjoKICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkKICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQogICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICBMYXVuY2hSQVcodGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgdGltZXIuam9pbigpCiAgICBlbGlmIGNvbW1hbmQgPT0gInBvc3QiIG9yIGNvbW1hbmQgPT0gIlBPU1QiOgogICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpCiAgICAgICAgdGltZXIuc3RhcnQoKQogICAgICAgIExhdW5jaFBPU1QodGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgdGltZXIuam9pbigpCiAgICBlbGlmIGNvbW1hbmQgPT0gImhlYWQiIG9yIGNvbW1hbmQgPT0gIkhFQUQiOgogICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpCiAgICAgICAgdGltZXIuc3RhcnQoKQogICAgICAgIExhdW5jaEhFQUQodGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgdGltZXIuam9pbigpCiAgICBlbGlmIGNvbW1hbmQgPT0gInB4cmF3IiBvciBjb21tYW5kID09ICJQWFJBVyI6CiAgICAgICAgaWYgZ2V0X3Byb3hpZXMoKToKICAgICAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICAgICAgTGF1bmNoUFhSQVcodGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQogICAgZWxpZiBjb21tYW5kID09ICJzb2MiIG9yIGNvbW1hbmQgPT0gIlNPQyI6CiAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkKICAgICAgICB0aW1lci5zdGFydCgpCiAgICAgICAgTGF1bmNoU09DKHRhcmdldCwgdGhyZWFkLCB0KQogICAgICAgIHRpbWVyLmpvaW4oKQogICAgZWxpZiBjb21tYW5kID09ICJweHNvYyIgb3IgY29tbWFuZCA9PSAiUFhTT0MiOgogICAgICAgIGlmIGdldF9wcm94aWVzKCk6CiAgICAgICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQogICAgICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQogICAgICAgICAgICB0aW1lci5zdGFydCgpCiAgICAgICAgICAgIExhdW5jaFBYU09DKHRhcmdldCwgdGhyZWFkLCB0KQogICAgICAgICAgICB0aW1lci5qb2luKCkKICAgIGVsaWYgY29tbWFuZCA9PSAiY2ZyZXEiIG9yIGNvbW1hbmQgPT0gIkNGUkVRIjoKICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkKICAgICAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIgWypdICIrRm9yZS5XSElURSsiQnlwYXNzaW5nIENGLi4uIChNYXggNjBzKVxuIikKICAgICAgICBpZiBnZXRfY29va2llKHRhcmdldCk6CiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICAgICAgTGF1bmNoQ0ZQUk8odGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiBbKl0gIitGb3JlLldISVRFKyJGYWlsZWQgdG8gYnlwYXNzIGNmXG4iKQogICAgZWxpZiBjb21tYW5kID09ICJjZnNvYyIgb3IgY29tbWFuZCA9PSAiQ0ZTT0MiOgogICAgICAgIHRhcmdldCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDcoKQogICAgICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiBbKl0gIitGb3JlLldISVRFKyJCeXBhc3NpbmcgQ0YuLi4gKE1heCA2MHMpXG4iKQogICAgICAgIGlmIGdldF9jb29raWUodGFyZ2V0KToKICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkKICAgICAgICAgICAgdGltZXIuc3RhcnQoKQogICAgICAgICAgICBMYXVuY2hDRlNPQyh0YXJnZXQsIHRocmVhZCwgdCkKICAgICAgICAgICAgdGltZXIuam9pbigpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIFsqXSAiK0ZvcmUuV0hJVEUrIkZhaWxlZCB0byBieXBhc3MgY2ZcbiIpCiAgICBlbGlmIGNvbW1hbmQgPT0gInB4c2t5IiBvciBjb21tYW5kID09ICJQWFNLWSI6CiAgICAgICAgaWYgZ2V0X3Byb3hpZXMoKToKICAgICAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpCiAgICAgICAgICAgIHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWF0dGFja1NLWSwgYXJncz0odGFyZ2V0LCB0LCB0aHJlYWQpKS5zdGFydCgpCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICAgICAgdGltZXIuam9pbigpCiAgICBlbGlmIGNvbW1hbmQgPT0gInNreSIgb3IgY29tbWFuZCA9PSAiU0tZIjoKICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkKICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1hdHRhY2tTVEVMTEFSLCBhcmdzPSh0YXJnZXQsIHQsIHRocmVhZCkpLnN0YXJ0KCkKICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQogICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICB0aW1lci5qb2luKCkKICAgIGVsaWYgY29tbWFuZCA9PSAidWRwIiBvciBjb21tYW5kID09ICJVRFAiOgogICAgICAgIHRhcmdldCwgcG9ydCwgdGhyZWFkLCB0ID0gZ2V0X2luZm9fbDQoKQogICAgICAgIHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PXJ1bnNlbmRlciwgYXJncz0odGFyZ2V0LCBwb3J0LCB0LCB0aHJlYWQpKS5zdGFydCgpCiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkKICAgICAgICB0aW1lci5zdGFydCgpCiAgICAgICAgdGltZXIuam9pbigpCiAgICBlbGlmIGNvbW1hbmQgPT0gInRjcCIgb3IgY29tbWFuZCA9PSAiVENQIjoKICAgICAgICB0YXJnZXQsIHBvcnQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w0KCkKICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1ydW5mbG9vZGVyLCBhcmdzPSh0YXJnZXQsIHBvcnQsIHQsIHRocmVhZCkpLnN0YXJ0KCkKICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQogICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICB0aW1lci5qb2luKCkKICAgICAgICAKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgICAgIAogICAgZWxpZiBjb21tYW5kID09ICJzdWJuZXQiOgogICAgICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiBbPl0gIitGb3JlLldISVRFKyJJUCAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQogICAgICAgIHRhcmdldCA9IGlucHV0KCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoZiJodHRwczovL2FwaS5oYWNrZXJ0YXJnZXQuY29tL3N1Ym5ldGNhbGMvP3E9e3RhcmdldH0iKQogICAgICAgICAgICBwcmludChyLnRleHQpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwcmludCgnQW4gZXJyb3IgaGFzIG9jY3VycmVkIHdoaWxlIHNlbmRpbmcgdGhlIHJlcXVlc3QgdG8gdGhlIEFQSSEnKSAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgCiAgICBlbGlmIGNvbW1hbmQgPT0gImRucyI6CiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIFs+XSAiK0ZvcmUuV0hJVEUrIklQL0RPTUFJTiAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQogICAgICAgIHRhcmdldCA9IGlucHV0KCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoZiJodHRwczovL2FwaS5oYWNrZXJ0YXJnZXQuY29tL3JldmVyc2VkbnMvP3E9e3RhcmdldH0iKQogICAgICAgICAgICBwcmludChyLnRleHQpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwcmludCgnQW4gZXJyb3IgaGFzIG9jY3VycmVkIHdoaWxlIHNlbmRpbmcgdGhlIHJlcXVlc3QgdG8gdGhlIEFQSSEnKQogICAgICAgICAgICAKICAgIGVsaWYgY29tbWFuZCA9PSAiZ2VvaXAiOgogICAgICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiBbPl0gIitGb3JlLldISVRFKyJJUCAiK0ZvcmUuTElHSFRDWUFOX0VYKyI6ICIrRm9yZS5MSUdIVEdSRUVOX0VYKQogICAgICAgIHRhcmdldCA9IGlucHV0KCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoZiJodHRwczovL2FwaS5oYWNrZXJ0YXJnZXQuY29tL2dlb2lwLz9xPXt0YXJnZXR9IikKICAgICAgICAgICAgcHJpbnQoci50ZXh0KQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcHJpbnQoJ0FuIGVycm9yIGhhcyBvY2N1cnJlZCB3aGlsZSBzZW5kaW5nIHRoZSByZXF1ZXN0IHRvIHRoZSBBUEkhJykKICAgIGVsc2U6CiAgICAgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIFs+XSAiK0ZvcmUuV0hJVEUrIlVua25vd24gY29tbWFuZC4gdHlwZSAnaGVscCcgdG8gc2VlIGFsbCBjb21tYW5kcy5cbiIpICAKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyAgIAoKZGVmIGZ1bmMoKToKICAgIHN0ZG91dC53cml0ZShGb3JlLlJFRCsiIFtceDFiWzM4OzI7MDsyNTU7MTg5bUxBWUVSIDciK0ZvcmUuUkVEKyJdXG4iKQogICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrImNmYiAgICAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIkJ5cGFzcyBDRiBhdHRhY2tcbiIpCiAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIg4oCiICIrRm9yZS5XSElURSsicHhjZmIgICAgICAiK0ZvcmUuUkVEKyI6ICIrRm9yZS5XSElURSsiQnlwYXNzIENGIGF0dGFjayB3aXRoIHByb3h5XG4iKQogICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrImNmcHJvICAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIkJ5cGFzcyBDRiBVQU0sIENGIENBUFRDSEEsIENGIEJGTSwgQ0YgSlMgKHJlcXVlc3QpXG4iKQogICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrImNmc29jICAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIkJ5cGFzcyBDRiBVQU0sIENGIENBUFRDSEEsIENGIEJGTSwgQ0YgSlMgKHNvY2tldClcbiIpCiMgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrInNreSAgICAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIkhUVFBTIEZsb29kIGFuZCBieXBhc3MgZm9yIENGIE5vU2VjLCBERG9TIEd1YXJkIEZyZWUgYW5kIHZTaGllbGRcbiIpCiMgICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrInN0ZWxsYXIgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIkhUVFBTIFNreSBtZXRob2Qgd2l0aG91dCBwcm94aWVzXG4iKQogICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrInJhdyAgICAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIlJlcXVlc3QgYXR0YWNrXG4iKQogICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrInBvc3QgICAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIlBvc3QgUmVxdWVzdCBhdHRhY2tcbiIpCiAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIg4oCiICIrRm9yZS5XSElURSsiaGVhZCAgICAgICAiK0ZvcmUuUkVEKyI6ICIrRm9yZS5XSElURSsiSGVhZCBSZXF1ZXN0IGF0dGFja1xuIikKICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiDigKIgIitGb3JlLldISVRFKyJzb2MgICAgICAgICIrRm9yZS5SRUQrIjogIitGb3JlLldISVRFKyJTb2NrZXQgYXR0YWNrXG4iKQogICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrInB4cmF3ICAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIlByb3h5IFJlcXVlc3QgYXR0YWNrXG4iKQogICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrInB4c29jICAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIlByb3h5IFNvY2tldCBhdHRhY2tcbiIpCiAgICAKICAgICNzdGRvdXQud3JpdGUoRm9yZS5SRUQrIiBcblsiK0ZvcmUuV0hJVEUrIkxBWUVSIDQiK0ZvcmUuUkVEKyJdXG4iKQogICAgI3N0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiDigKIgIitGb3JlLldISVRFKyJ0Y3AgICAgICAgICIrRm9yZS5SRUQrIjogIitGb3JlLldISVRFKyJTdHJvbmcgVENQIGF0dGFjayAobm90IHN1cHBvcnRlZClcbiIpCiAgICAjc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrInVkcCAgICAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIlN0cm9uZyBVRFAgYXR0YWNrIChub3Qgc3VwcG9ydGVkKVxuIikKCiAgICBzdGRvdXQud3JpdGUoRm9yZS5SRUQrIiBcbltceDFiWzM4OzI7MDsyNTU7MTg5bVRPT0xTIitGb3JlLlJFRCsiXVxuIikKICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiDigKIgIitGb3JlLldISVRFKyJkbnMgICAgICAgICIrRm9yZS5SRUQrIjogIitGb3JlLldISVRFKyJDbGFzc2ljIEROUyBMb29rdXBcbiIpCiAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIg4oCiICIrRm9yZS5XSElURSsiZ2VvaXAgICAgICAiK0ZvcmUuUkVEKyI6ICIrRm9yZS5XSElURSsiR2VvIElQIEFkZHJlc3MgTG9va3VwXG4iKQogICAgc3Rkb3V0LndyaXRlKEZvcmUuTUFHRU5UQSsiIOKAoiAiK0ZvcmUuV0hJVEUrInN1Ym5ldCAgICAgIitGb3JlLlJFRCsiOiAiK0ZvcmUuV0hJVEUrIlN1Ym5ldCBJUCBBZGRyZXNzIExvb2t1cFxuIikKICAgIAogICAgc3Rkb3V0LndyaXRlKEZvcmUuUkVEKyIgXG5bXHgxYlszODsyOzA7MjU1OzE4OW1PVEhFUiIrRm9yZS5SRUQrIl1cbiIpCiAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIg4oCiICIrRm9yZS5XSElURSsiY2xlYXIvY2xzICAiK0ZvcmUuUkVEKyI6ICIrRm9yZS5XSElURSsiQ2xlYXIgY29uc29sZVxuIikKICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiDigKIgIitGb3JlLldISVRFKyJleGl0ICAgICAgICIrRm9yZS5SRUQrIjogIitGb3JlLldISVRFKyJCeWUuLlxuIikKICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiDigKIgIitGb3JlLldISVRFKyJjcmVkaXQgICAgICIrRm9yZS5SRUQrIjogIitGb3JlLldISVRFKyJUaGFua3MgZm9yXG4iKQoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIGluaXQoY29udmVydD1UcnVlKQogICAgaWYgbGVuKHN5cy5hcmd2KSA8IDI6CiAgICAgICAgdWEgPSBvcGVuKCcuL3Jlc291cmNlcy91YS50eHQnLCAncicpLnJlYWQoKS5zcGxpdCgnXG4nKQogICAgICAgIGNsZWFyKCkKICAgICAgICB0aXRsZSgpCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgY29tbWFuZCgpCiAgICBlbGlmIGxlbihzeXMuYXJndikgPT0gNToKICAgICAgICBwYXNzCiAgICBlbHNlOgogICAgICAgIHN0ZG91dC53cml0ZSgiTWV0aG9kOiBjZmIsIHB4Y2ZiLCBjZnJlcSwgY2Zzb2MsIHB4c2t5LCBza3ksIGh0dHAyLCBweGh0dHAyLCBnZXQsIHBvc3QsIGhlYWQsIHNvYywgcHhyYXcsIHB4c29jXG4iKQogICAgICAgIHN0ZG91dC53cml0ZShmInVzYWdlOn4jIHB5dGhvbjMge3N5cy5hcmd2WzBdfSA8bWV0aG9kPiA8dGFyZ2V0PiA8dGhyZWFkPiA8dGltZT5cbiIpCiAgICAgICAgc3lzLmV4aXQoKQogICAgdWEgPSBvcGVuKCcuL3Jlc291cmNlcy91YS50eHQnLCAncicpLnJlYWQoKS5zcGxpdCgnXG4nKQogICAgbWV0aG9kID0gc3lzLmFyZ3ZbMV0ucnN0cmlwKCkKICAgIHRhcmdldCA9IHN5cy5hcmd2WzJdLnJzdHJpcCgpCiAgICB0aHJlYWQgPSBzeXMuYXJndlszXS5yc3RyaXAoKQogICAgdCAgICAgID0gc3lzLmFyZ3ZbNF0ucnN0cmlwKCkKICAgIGlmIG1ldGhvZCA9PSAiY2ZiIjoKICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQogICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICBMYXVuY2hDRkIodGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgdGltZXIuam9pbigpCiAgICBlbGlmIG1ldGhvZCA9PSAicHhjZmIiOgogICAgICAgIGlmIGdldF9wcm94aWVzKCk6CiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICAgICAgTGF1bmNoUFhDRkIodGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQogICAgZWxpZiBtZXRob2QgPT0gImdldCI6CiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkKICAgICAgICB0aW1lci5zdGFydCgpCiAgICAgICAgTGF1bmNoUkFXKHRhcmdldCwgdGhyZWFkLCB0KQogICAgICAgIHRpbWVyLmpvaW4oKQogICAgZWxpZiBtZXRob2QgPT0gInBvc3QiOgogICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpCiAgICAgICAgdGltZXIuc3RhcnQoKQogICAgICAgIExhdW5jaFBPU1QodGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgdGltZXIuam9pbigpCiAgICBlbGlmIG1ldGhvZCA9PSAiaGVhZCI6CiAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkKICAgICAgICB0aW1lci5zdGFydCgpCiAgICAgICAgTGF1bmNoSEVBRCh0YXJnZXQsIHRocmVhZCwgdCkKICAgICAgICB0aW1lci5qb2luKCkKICAgIGVsaWYgbWV0aG9kID09ICJweHJhdyI6CiAgICAgICAgaWYgZ2V0X3Byb3hpZXMoKToKICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkKICAgICAgICAgICAgdGltZXIuc3RhcnQoKQogICAgICAgICAgICBMYXVuY2hQWFJBVyh0YXJnZXQsIHRocmVhZCwgdCkKICAgICAgICAgICAgdGltZXIuam9pbigpCiAgICBlbGlmIG1ldGhvZCA9PSAic29jIjoKICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQogICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICBMYXVuY2hTT0ModGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgdGltZXIuam9pbigpCiAgICBlbGlmIG1ldGhvZCA9PSAicHhzb2MiOgogICAgICAgIGlmIGdldF9wcm94aWVzKCk6CiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICAgICAgTGF1bmNoUFhTT0ModGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQogICAgZWxpZiBtZXRob2QgPT0gImNmcmVxIjoKICAgICAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIgWypdICIrRm9yZS5XSElURSsiQnlwYXNzaW5nIENGLi4uIChNYXggNjBzKVxuIikKICAgICAgICBpZiBnZXRfY29va2llKHRhcmdldCk6CiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICAgICAgTGF1bmNoQ0ZQUk8odGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiBbKl0gIitGb3JlLldISVRFKyJGYWlsZWQgdG8gYnlwYXNzIGNmXG4iKQogICAgZWxpZiBtZXRob2QgPT0gImNmc29jIjoKICAgICAgICBzdGRvdXQud3JpdGUoRm9yZS5NQUdFTlRBKyIgWypdICIrRm9yZS5XSElURSsiQnlwYXNzaW5nIENGLi4uIChNYXggNjBzKVxuIikKICAgICAgICBpZiBnZXRfY29va2llKHRhcmdldCk6CiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICAgICAgTGF1bmNoQ0ZTT0ModGFyZ2V0LCB0aHJlYWQsIHQpCiAgICAgICAgICAgIHRpbWVyLmpvaW4oKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHN0ZG91dC53cml0ZShGb3JlLk1BR0VOVEErIiBbKl0gIitGb3JlLldISVRFKyJGYWlsZWQgdG8gYnlwYXNzIGNmXG4iKQogICAgZWxpZiBtZXRob2QgPT0gImh0dHAyIjoKICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkKICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQogICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICBMYXVuY2hIVFRQMih0YXJnZXQsIHRocmVhZCwgdCkKICAgICAgICB0aW1lci5qb2luKCkKICAgIGVsaWYgbWV0aG9kID09ICJweGh0dHAyIjoKICAgICAgICBpZiBnZXRfcHJveGllcygpOgogICAgICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkKICAgICAgICAgICAgdGltZXIgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1jb3VudGRvd24sIGFyZ3M9KHQsKSkKICAgICAgICAgICAgdGltZXIuc3RhcnQoKQogICAgICAgICAgICBMYXVuY2hQWEhUVFAyKHRhcmdldCwgdGhyZWFkLCB0KQogICAgICAgICAgICB0aW1lci5qb2luKCkKICAgIGVsaWYgbWV0aG9kID09ICJweHNreSI6CiAgICAgICAgaWYgZ2V0X3Byb3hpZXMoKToKICAgICAgICAgICAgdGFyZ2V0LCB0aHJlYWQsIHQgPSBnZXRfaW5mb19sNygpCiAgICAgICAgICAgIHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWF0dGFja1NLWSwgYXJncz0odGFyZ2V0LCB0LCB0aHJlYWQpKS5zdGFydCgpCiAgICAgICAgICAgIHRpbWVyID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9Y291bnRkb3duLCBhcmdzPSh0LCkpCiAgICAgICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICAgICAgdGltZXIuam9pbigpCiAgICBlbGlmIG1ldGhvZCA9PSAic2t5IjoKICAgICAgICB0YXJnZXQsIHRocmVhZCwgdCA9IGdldF9pbmZvX2w3KCkKICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1hdHRhY2tTVEVMTEFSLCBhcmdzPSh0YXJnZXQsIHQsIHRocmVhZCkpLnN0YXJ0KCkKICAgICAgICB0aW1lciA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PWNvdW50ZG93biwgYXJncz0odCwpKQogICAgICAgIHRpbWVyLnN0YXJ0KCkKICAgICAgICB0aW1lci5qb2luKCkKICAgIGVsc2U6CiAgICAgICAgc3Rkb3V0LndyaXRlKCJObyBtZXRob2QgZm91bmQuXG5NZXRob2Q6IGNmYiwgcHhjZmIsIGNmcmVxLCBjZnNvYywgcHhza3ksIHNreSwgaHR0cDIsIHB4aHR0cDIsIGdldCwgcG9zdCwgaGVhZCwgc29jLCBweHJhdywgcHhzb2NcbiIp"))